<nb-card>
  <nb-card-header>
    <div class="d-flex justify-content-between align-items-center">
      <div class="d-flex align-items-center">
        <h6 class="mb-0">待审批申请</h6>
        <span class="badge badge-warning ml-2">{{ filteredRequests.length }}</span>
      </div>
      <div class="d-flex align-items-center gap-2">
        <nb-select [(selected)]="typeFilter" (selectedChange)="onTypeFilterChange()" size="small">
          <nb-option *ngFor="let opt of typeOptions" [value]="opt.value">{{ opt.label }}</nb-option>
        </nb-select>
        <button nbButton status="primary" size="small" (click)="loadPendingRequests()">
          <nb-icon icon="refresh-outline"></nb-icon>
        </button>
      </div>
    </div>
  </nb-card-header>

  <nb-card-body>
    <div *ngIf="requestsLoading" class="text-center p-4">
      <nb-spinner status="primary"></nb-spinner>
    </div>

    <ng2-smart-table
      *ngIf="!requestsLoading && filteredRequests.length > 0"
      [settings]="tableSettings"
      [source]="approvalSource"
      (edit)="onEditRow($event)">
    </ng2-smart-table>

    <div *ngIf="!requestsLoading && filteredRequests.length === 0" class="empty-state">
      <nb-icon icon="checkmark-circle-2-outline" class="empty-icon" status="success"></nb-icon>
      <p>暂无待审批申请</p>
    </div>
  </nb-card-body>
</nb-card>
