# ğŸš€ å¤šç§Ÿæˆ·æµ‹è¯•å¿«é€Ÿå¼€å§‹

## ä¸€é”®è¿è¡Œ

```bash
cd /home/oppo/Documents/stellar/scripts/test
./test-multi-tenant-all.sh
```

## åˆ†æ­¥è¿è¡Œ

```bash
# Step 1: è¶…çº§ç®¡ç†å‘˜æµ‹è¯•
./test-multi-tenant-super-admin.sh

# Step 2: ç»„ç»‡ç®¡ç†å‘˜æµ‹è¯•
./test-multi-tenant-org-admin.sh

# Step 3: æ™®é€šç”¨æˆ·æµ‹è¯•
./test-multi-tenant-regular-user.sh
```

## æµ‹è¯•è´¦å·

| è§’è‰² | ç”¨æˆ·å | å¯†ç  | ç”¨é€” |
|-----|--------|------|------|
| è¶…çº§ç®¡ç†å‘˜ | `admin` | `admin` | åˆ›å»ºç»„ç»‡å’Œå…¨å±€ç®¡ç† |
| Alpha ç»„ç»‡ç®¡ç†å‘˜ | `alpha_admin` | `Alpha@123` | ç®¡ç† Alpha ç»„ç»‡ |
| Beta ç»„ç»‡ç®¡ç†å‘˜ | `beta_admin` | `Beta@123` | ç®¡ç† Beta ç»„ç»‡ |
| Alpha æ™®é€šç”¨æˆ· | `alpha_user1` | `User@123` | æœ‰é™æƒé™è®¿é—® |

## æµ‹è¯•æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Super Admin (admin)                   â”‚
â”‚  â€¢ åˆ›å»º 2 ä¸ªç»„ç»‡ (Alpha, Beta)                            â”‚
â”‚  â€¢ åˆ›å»ºç»„ç»‡ç®¡ç†å‘˜ (alpha_admin, beta_admin)               â”‚
â”‚  â€¢ ä¸ºæ¯ä¸ªç»„ç»‡åˆ›å»ºé›†ç¾¤                                      â”‚
â”‚  â€¢ åˆ›å»ºç³»ç»Ÿçº§è§’è‰²                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â†“                                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Organization Alpha â”‚                 â”‚ Organization Beta â”‚
â”‚  â€¢ alpha_admin    â”‚                 â”‚  â€¢ beta_admin    â”‚
â”‚  â€¢ alpha_user1    â”‚                 â”‚                  â”‚
â”‚  â€¢ alpha_cluster  â”‚                 â”‚  â€¢ beta_cluster  â”‚
â”‚  â€¢ alpha_developerâ”‚                 â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ alpha_user1       â”‚
â”‚  â€¢ æŸ¥çœ‹é›†ç¾¤        â”‚
â”‚  â€¢ æ‰§è¡ŒæŸ¥è¯¢        â”‚
â”‚  â€¢ å—æƒé™é™åˆ¶      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## éªŒè¯ç‚¹

### âœ… è¶…çº§ç®¡ç†å‘˜
- [x] åˆ›å»ºç»„ç»‡
- [x] è·¨ç»„ç»‡æŸ¥çœ‹èµ„æº
- [x] ä¸ºä»»æ„ç»„ç»‡åˆ›å»ºé›†ç¾¤
- [x] åˆ›å»ºç³»ç»Ÿçº§è§’è‰²

### âœ… ç»„ç»‡ç®¡ç†å‘˜
- [x] åªèƒ½çœ‹åˆ°è‡ªå·±çš„ç»„ç»‡
- [x] åˆ›å»ºç»„ç»‡å†…ç”¨æˆ·
- [x] åˆ›å»ºç»„ç»‡å†…é›†ç¾¤
- [x] æ— æ³•åˆ›å»ºç³»ç»Ÿè§’è‰²
- [x] æ— æ³•è®¿é—®å…¶ä»–ç»„ç»‡

### âœ… æ™®é€šç”¨æˆ·
- [x] åªèƒ½è®¿é—®æˆæƒé›†ç¾¤
- [x] æ— æ³•åˆ›å»ºé›†ç¾¤/ç”¨æˆ·/è§’è‰²
- [x] å—ç»„ç»‡ä½œç”¨åŸŸé™åˆ¶

## é¢„æœŸè¾“å‡º

æˆåŠŸæ—¶ï¼š
```
================================================
âœ“ ALL TESTS PASSED
================================================
The multi-tenant system is working correctly!
```

## å‰ææ¡ä»¶

1. âœ… åç«¯è¿è¡Œåœ¨ http://localhost:8081
2. âœ… ä½¿ç”¨ admin/admin å¯ä»¥ç™»å½•
3. âœ… å·²å®‰è£… curl å’Œ python3

## æ•…éšœæ’æŸ¥

**é—®é¢˜ï¼šåç«¯æœªè¿è¡Œ**
```bash
# æ£€æŸ¥è¿›ç¨‹
ps aux | grep stellar

# æ£€æŸ¥ç«¯å£
lsof -i :8081

# å¯åŠ¨åç«¯
cd /home/oppo/Documents/stellar
./scripts/dev/start-backend.sh
```

**é—®é¢˜ï¼šç™»å½•å¤±è´¥**
- ç¡®ä¿æŒ‰é¡ºåºè¿è¡Œè„šæœ¬
- æ£€æŸ¥ç”¨æˆ·æ˜¯å¦å·²åˆ›å»º

**é—®é¢˜ï¼šæƒé™è¢«æ‹’ç»**
```bash
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x test-multi-tenant-*.sh
```

## æ¸…ç†æ•°æ®

å¦‚éœ€é‡æ–°æµ‹è¯•ï¼Œå¯ä»¥é‡å¯åç«¯æˆ–æ¸…ç†æ•°æ®åº“ï¼š

```bash
# åˆ é™¤æ•°æ®åº“æ–‡ä»¶
rm /home/oppo/Documents/stellar/backend/stellar.db

# é‡å¯åç«¯
./scripts/dev/restart-backend.sh
```

## ä¸‹ä¸€æ­¥

æµ‹è¯•é€šè¿‡åï¼Œå¯ä»¥ï¼š
1. è®¿é—®å‰ç«¯ç•Œé¢ http://localhost:4200
2. ä½¿ç”¨ä¸Šè¿°è´¦å·ç™»å½•ä½“éªŒ
3. æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ `README-MULTI-TENANT-TESTS.md`
